// Copyright (c) 2024 Wladislav Radchenko
// All rights reserved.
// This file is proprietary and may not be reproduced, distributed, or modified without express permission.

async function createLoginForm(metadata = {}, callback = null, callbackCancel = null, isFreePlan = false) {
    // Create the root modal
    const modalRoot = document.createElement('div');
    modalRoot.classList.add('modal-root', 'fixed', 'backdrop-blur-xl', 'top-0', 'left-0', 'w-full', 'h-screen', 'flex', 'items-center', 'justify-center', 'z-[9999]', 'p-3.75', 'md:p-10', 'bg-black', 'bg-opacity-40');

    const modalContainer = document.createElement('div');
    modalContainer.classList.add('flex', 'flex-col', 'p-5', 'rounded-[.625rem]', 'relative', 'w-full', 'max-w-sm', 'transition-all', 'max-h-full', 'bg-dark-pop-up', 'gap-5');

    const closeButton = document.createElement('button');
    closeButton.classList.add('absolute', 'top-2', 'right-2', 'opacity-60', 'hover:opacity-100', 'transition-opacity');
    closeButton.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="none" stroke="white"><path d="M15 5L5 15M5 5L15 15" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"></path></svg>`;
    closeButton.addEventListener('click', async () => {
        // Remove modal
        modalRoot.remove()
    });

    const modalHeading = document.createElement('h2');
    modalHeading.classList.add('flex', 'text-[1.25rem]', 'leading-6', 'tracking-[0.0125rem]', 'font-extra-thick', 'font-alumni', 'h2-alumni', 'items-center');
    modalHeading.innerHTML = `${getTranslationBabel('Want to try the full experience?')} <text class="ml-2 px-2.5 gap-1 rounded-md text-dark-background bg-accent-primary text-m">PRO</text>`;

    // About message
    const aboutLinkText = document.createElement('p');
    aboutLinkText.className = 'text-subtitle text-light-secondary';
    aboutLinkText.innerHTML = `${getTranslationBabel('Every month, you can activate all premium features for free and get early access to new updates — download the latest version from')} <text class="text-accent-primary">wunjo.online</text>.`

    // Open website
    const divWeb = document.createElement('div');
    divWeb.className = 'flex gap-5 flex-row items-center justify-center w-full';
    const aWeb = document.createElement('a');
    aWeb.className = 'rounded-md flex items-center justify-center transition-colors font-normal disabled:cursor-not-allowed px-4 gap-2 py-2.5 h-max self-center !pr-3 w-full hover:bg-accent-hover text-dark-background bg-accent-primary';
    aWeb.href = 'https://wunjo.online';
    aWeb.target = 'blank';
    aWeb.innerHTML = `<i class="fa-solid fa-wifi"></i> ${getTranslationBabel('Open')}`;
    divWeb.appendChild(aWeb);

    // Create description
    const authorText = document.createElement('p');
    authorText.className = 'text-subtitle text-light-secondary';
    authorText.innerHTML = `${getTranslationBabel('Follow the author’s channel to stay up to date with new features and releases.')}`;

    // Open website
    const divLinkAuthor = document.createElement('div');
    divLinkAuthor.className = 'flex gap-5 flex-row items-center justify-center w-full';
    const aLinkTelegram = document.createElement('a');
    aLinkTelegram.className = 'rounded-md flex items-center justify-center transition-colors font-normal disabled:cursor-not-allowed px-4 gap-2 py-2.5 h-max self-center !pr-3 w-full hover:bg-accent-hover text-dark-background bg-accent-primary';
    aLinkTelegram.href = 'https://t.me/wladblog';
    aLinkTelegram.target = 'blank';
    aLinkTelegram.innerHTML = `<svg width="18px" height="18px" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 436 476"><path data-fill="1" d="M436 143c-.084-60.778-47.57-110.591-103.285-128.565C263.528-7.884 172.279-4.649 106.214 26.424 26.142 64.089.988 146.596.051 228.883c-.77 67.653 6.004 245.841 106.83 247.11 74.917.948 86.072-95.279 120.737-141.623 24.662-32.972 56.417-42.285 95.507-51.929C390.309 265.865 436.097 213.011 436 143Z"></path></svg> ${getTranslationBabel('Patreon')}`;
    const aLinkPatreon = document.createElement('a');
    aLinkPatreon.className = 'rounded-md flex items-center justify-center transition-colors font-normal disabled:cursor-not-allowed px-4 gap-2 py-2.5 h-max self-center !pr-3 w-full hover:bg-accent-hover text-dark-background bg-accent-primary';
    aLinkPatreon.href = 'https://www.patreon.com/c/wladradchenko';
    aLinkPatreon.target = 'blank';
    aLinkPatreon.innerHTML = `<svg width="20px" height="20px" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M41.4193 7.30899C41.4193 7.30899 45.3046 5.79399 44.9808 9.47328C44.8729 10.9883 43.9016 16.2908 43.1461 22.0262L40.5559 39.0159C40.5559 39.0159 40.3401 41.5048 38.3974 41.9377C36.4547 42.3705 33.5408 40.4227 33.0011 39.9898C32.5694 39.6652 24.9068 34.7955 22.2086 32.4148C21.4531 31.7655 20.5897 30.4669 22.3165 28.9519L33.6487 18.1305C34.9438 16.8319 36.2389 13.8019 30.8426 17.4812L15.7331 27.7616C15.7331 27.7616 14.0063 28.8437 10.7686 27.8698L3.75342 25.7055C3.75342 25.7055 1.16321 24.0823 5.58815 22.459C16.3807 17.3729 29.6555 12.1786 41.4193 7.30899Z" fill="#000000"></path></svg> ${getTranslationBabel('Telegram')}`;
    divLinkAuthor.append(aLinkTelegram, aLinkPatreon);

    // Append elements to the modal container
    modalContainer.append(closeButton, modalHeading, aboutLinkText, divWeb, authorText, divLinkAuthor);

    // Append modal container to the root
    modalRoot.appendChild(modalContainer);
    document.body.appendChild(modalRoot);
}

async function createConnection(callback = null, callbackCancel = null, isUpdateDate=false, isFreePlan=false) {
    // Call modal
    await createLoginForm({}, callback, callbackCancel, isFreePlan)
}

async function isAuthorized() {
    return false;
}

