class SendModuleDataEnhancement{constructor(e){this.method=e,this.subMethod=e,this.moduleParameters={nameFile:generateUUID(),model:"gfpgan"},this.sourceFile={nameFile:null,urlFile:null,formatFile:null,fileSizeBytes:null,naturalWidth:null,naturalHeight:null,offsetWidth:null,offsetHeight:null,startTime:null,endTime:null},this.updatableKeys=new Set(["moduleParameters.nameFile","moduleParameters.model"])}clearSourceFile(){this.sourceFile={nameFile:null,urlFile:null,formatFile:null,fileSizeBytes:null,naturalWidth:null,naturalHeight:null,offsetWidth:null,offsetHeight:null,startTime:null,endTime:null}}updateData(e){if(this.updatableKeys&&this.updatableKeys instanceof Set){const o=(e,a,t="")=>{for(const n in a){var l=t?t+"."+n:n;this.updatableKeys.has(l)&&n in e?e[n]=a[n]:"object"==typeof a[n]&&null!==a[n]&&n in e&&o(e[n],a[n],l)}};o(this,e)}else console.warn("updateData: updatableKeys not defined, update cancelled.")}}const callbacks={fetchSendModuleDataCallback:fetchSendModuleDataEnhancement,setClearCallback:function(){sendModuleData.clearSourceFile()},toggleModificationCallback:null,setMetaButtonCallback:setMetaButtonEnhancement,setMotionButtonCallback:setMotionButtonEnhancement,setParametersButtonCallback:null,setModuleImgButtonsCallback:null,setModuleVideoButtonsCallback:null,setDefaultSendModuleData:SendModuleDataEnhancement};let sendModuleData=new SendModuleDataEnhancement(moduleName);async function fetchSendModuleDataEnhancement(){""===sendModuleData.moduleParameters.nameFile.trim()&&(sendModuleData.moduleParameters.nameFile=generateUUID());var e=["jpg","jpeg","png","gif","bmp"].includes(sendModuleData.sourceFile.formatFile.toLowerCase())?{tmpFileName:generateImageFilename(),validMessage:""}:["mp4","avi","mov","wmv","mkv"].includes(sendModuleData.sourceFile.formatFile.toLowerCase())?{tmpFileName:generateVideoFilename(),validMessage:""}:(console.log("The format file is neither an image nor a video format."),{tmpFileName:!1,validMessage:getTranslationBabel("Yikes! Looks like an alien format. Stick to images or videos for now.")}),a=e.validMessage;return e.tmpFileName&&sendModuleData.sourceFile.urlFile?(sendModuleData.sourceFile.nameFile=sendModuleData.sourceFile.urlFile.split("/").pop(),console.log(JSON.stringify(sendModuleData,null,4)),await postModuleTaskEvent(sendModuleData),sendModuleData.moduleParameters.nameFile=generateUUID(),{statusBool:!0,validMessage:a}):{statusBool:!1,validMessage:a}}function setMetaButtonEnhancement(){var e=document.querySelector(".footer-parameters").querySelector("div"),a=(e.innerHTML="",sendModuleData.moduleParameters.nameFile),a=createGeneralTextInput({label:getTranslationBabel("Filename"),defaultValue:a,disableStatus:!1,onChange:e=>{var a=event.target.value;/^[a-zA-Z0-9-]*$/.test(a)||(event.target.value=a.slice(0,-1)),sendModuleData.moduleParameters.nameFile=e}})["wrapper"];const l=createGeneralTextInput({label:getTranslationBabel("Resized to"),defaultValue:"1280x720",disableStatus:!0})["wrapper"];getLimitResolution(moduleName).then(e=>{var a=sendModuleData.sourceFile.naturalWidth,t=sendModuleData.sourceFile.naturalHeight,e=setLimitResolution(e,a,t);l.querySelector("input").value=e.newWidth+"x"+e.newHeight}).catch(e=>{}),e.append(a,l)}function setMotionButtonEnhancement(){var e=document.querySelector(".footer-parameters").querySelector("div"),a=(e.classList.remove("mt-3"),e.innerHTML="",document.createElement("div")),t=(a.classList.add("flex","gap-3","items-center","justify-between"),document.createElement("p")),l=(t.classList.add("font-extra-thick"),t.textContent=getTranslationBabel("Method"),createGeneralRadioButton({label:getTranslationBabel("Face boost"),defaultValue:!0,isPro:!1,isGpu:!0,onChange:e=>{sendModuleData.moduleParameters.model="gfpgan"}}))["wrapper"],n=createGeneralRadioButton({label:getTranslationBabel("Anime enhance"),defaultValue:!1,isPro:!0,isGpu:!0,onChange:e=>{sendModuleData.moduleParameters.model="animesgan"}})["wrapper"],o=createGeneralRadioButton({label:getTranslationBabel("Real video"),defaultValue:!1,isPro:!0,isGpu:!0,onChange:e=>{sendModuleData.moduleParameters.model="realesrgan"}})["wrapper"];const s=[l,n,o];s.forEach(a=>{a.onclick=async()=>{s.forEach(e=>{e===a||(e=e.querySelector("button")).classList.contains("!bg-dark-elements")||(e.classList.remove("!bg-accent-primary","!text-dark-background"),e.classList.add("!bg-dark-elements"))})}}),a.appendChild(t),e.append(a,l,n,o)}function setLiteSetting(){const e=getTranslationBabel("enhancement");var a=document.querySelector("#settings");a.href="",a.onclick=async function(){event.preventDefault(),createModalLiteSetting(e,"ENHANCEMENT")}}setLiteSetting(),createFooterFile(callbacks,pageFileFormats);