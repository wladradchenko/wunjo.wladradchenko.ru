class SendModuleDataRemoveBackground{constructor(e){this.method=e,this.subMethod=e,this.moduleParameters={nameFile:generateUUID(),backgroundColor:"transparent",reverseSelect:!1,SAM:[]},this.sourceFile={nameFile:null,urlFile:null,formatFile:null,fileSizeBytes:null,naturalWidth:null,naturalHeight:null,offsetWidth:null,offsetHeight:null,startTime:null,endTime:null},this.updatableKeys=new Set(["moduleParameters.nameFile","moduleParameters.backgroundColor","moduleParameters.reverseSelect"])}clearSourceFile(){this.sourceFile={nameFile:null,urlFile:null,formatFile:null,fileSizeBytes:null,naturalWidth:null,naturalHeight:null,offsetWidth:null,offsetHeight:null,startTime:null,endTime:null}}updateData(e){if(this.updatableKeys&&this.updatableKeys instanceof Set){const n=(e,t,a="")=>{for(const o in t){var l=a?a+"."+o:o;this.updatableKeys.has(l)&&o in e?e[o]=t[o]:"object"==typeof t[o]&&null!==t[o]&&o in e&&n(e[o],t[o],l)}};n(this,e)}else console.warn("updateData: updatableKeys not defined, update cancelled.")}}const callbacks={fetchSendModuleDataCallback:fetchSendModuleDataRemoveBackground,setClearCallback:function(){sendModuleData.clearSourceFile()},toggleModificationCallback:null,setMetaButtonCallback:setMetaButtonRemoveBackground,setMotionButtonCallback:null,setParametersButtonCallback:setParametersButtonRemoveBackground,setModuleImgButtonsCallback:setModuleImgButtons,setModuleVideoButtonsCallback:setModuleVideoButtons,setDefaultSendModuleData:SendModuleDataRemoveBackground};let sendModuleData=new SendModuleDataRemoveBackground(moduleName);async function fetchSendModuleDataRemoveBackground(){var e=Array.isArray(sendModuleData.moduleParameters.SAM)?0===sendModuleData.moduleParameters.SAM.length?(console.log("SAM is empty"),{tmpFileName:!1,validMessage:getTranslationBabel("Oopsie! Seems like you didn’t pick an object in your content. Click on the «Select object» button and choose any object from the media, please!")}):(""===sendModuleData.moduleParameters.nameFile.trim()&&(sendModuleData.moduleParameters.nameFile=generateUUID()),"number"!=typeof sendModuleData.sourceFile.offsetWidth||isNaN(sendModuleData.sourceFile.offsetWidth)?(console.log("Offset width is not a number or is empty"),{tmpFileName:!1,validMessage:getTranslationBabel("Uh-oh! The width looks wonky. Double-check it’s a number and not empty. Maybe click on «Select object» or load another file.")}):"number"!=typeof sendModuleData.sourceFile.offsetHeight||isNaN(sendModuleData.sourceFile.offsetHeight)?(console.log("Offset height is not a number or is empty"),{tmpFileName:!1,validMessage:getTranslationBabel("Hmm... The height seems fishy. Verify it’s a number and not empty. Check it’s a number and not empty. Maybe click on «Select object» or load another file.")}):["jpg","jpeg","png","gif","bmp"].includes(sendModuleData.sourceFile.formatFile.toLowerCase())?{tmpFileName:generateImageFilename(),validMessage:""}:["mp4","avi","mov","wmv","mkv"].includes(sendModuleData.sourceFile.formatFile.toLowerCase())?{tmpFileName:generateVideoFilename(),validMessage:""}:(console.log("The format file is neither an image nor a video format."),{tmpFileName:!1,validMessage:getTranslationBabel("Yikes! Looks like an alien format. Stick to images or videos for now.")})):(console.log("SAM is not array"),{tmpFileName:!1,validMessage:getTranslationBabel("Oopsie! Seems like you didn’t pick an object in your content. Click on the «Select object» button and choose any object from the media, please!")}),t=e.validMessage;return e.tmpFileName&&sendModuleData.sourceFile.urlFile?(sendModuleData.sourceFile.nameFile=sendModuleData.sourceFile.urlFile.split("/").pop(),console.log(JSON.stringify(sendModuleData,null,4)),await postModuleTaskEvent(sendModuleData),sendModuleData.moduleParameters.nameFile=generateUUID(),{statusBool:!0,validMessage:t}):{statusBool:!1,validMessage:t}}function setMetaButtonRemoveBackground(){var e=document.querySelector(".footer-parameters").querySelector("div"),t=(e.innerHTML="",sendModuleData.moduleParameters.nameFile),t=createGeneralTextInput({label:getTranslationBabel("Filename"),defaultValue:t,disableStatus:!1,onChange:e=>{var t=event.target.value;/^[a-zA-Z0-9-]*$/.test(t)||(event.target.value=t.slice(0,-1)),sendModuleData.moduleParameters.nameFile=e}})["wrapper"];const l=createGeneralTextInput({label:getTranslationBabel("Resized to"),defaultValue:"1280x720",disableStatus:!0})["wrapper"];getLimitResolution(moduleName).then(e=>{var t=sendModuleData.sourceFile.naturalWidth,a=sendModuleData.sourceFile.naturalHeight,e=setLimitResolution(e,t,a);l.querySelector("input").value=e.newWidth+"x"+e.newHeight}).catch(e=>{}),e.append(t,l)}function setParametersButtonRemoveBackground(){var e=document.querySelector(".footer-parameters").querySelector("div"),t=(e.classList.remove("mt-3"),e.innerHTML="",document.createElement("div")),a=(t.classList.add("flex","gap-3","items-center","justify-between"),document.createElement("p"));a.classList.add("font-extra-thick"),a.textContent=getTranslationBabel("Background color");const l=document.createElement("div");l.classList.add("flex","gap-1.5","items-center","justify-between");["transparent","#008000","#00FF7F","#007FFF","#0000FF"].forEach(e=>{var t=document.createElement("div"),a=(t.classList.add("group"),document.createElement("button"));a.classList.add("w-9","h-9","rounded-md","color-picker","opacity-60","group-hover:opacity-100","transition-all"),a.type="button","transparent"===e?(a.style.background=`url('data:image/svg+xml;utf8, <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 2 2"><path fill="white" d="M1,0H2V1H1V0ZM0,1H1V2H0V1Z"/><path fill="gray" d="M0,0H1V1H0V0ZM1,1H2V2H1V1Z"/></svg>')`,a.style.backgroundSize="15px"):a.style.backgroundColor=e,sendModuleData.moduleParameters.backgroundColor?sendModuleData.moduleParameters.backgroundColor===e&&(a.classList.remove("opacity-60"),a.style.border="2px solid white"):"transparent"===e&&(a.classList.remove("opacity-60"),a.style.border="2px solid white"),a.onclick=function(){l.querySelectorAll(".color-picker").forEach(e=>{e.classList.add("opacity-60"),e.style.border=""}),this.classList.remove("opacity-60"),this.style.border="2px solid white",sendModuleData.moduleParameters.backgroundColor=e},a.setAttribute("color",e),t.appendChild(a),l.appendChild(t)});var o=sendModuleData.moduleParameters.reverseSelect,o=createGeneralRadioButton({label:getTranslationBabel("Reverse select"),defaultValue:o,onChange:e=>{sendModuleData.moduleParameters.reverseSelect=e}})["wrapper"];t.appendChild(a),e.append(t,l,o)}function setModuleImgButtons(){var e=[],t=setButtonSelectSourceSAM();return e.push(t),e}function setModuleVideoButtons(){var e=[],t=setButtonSelectSourceSAM();return e.push(t),e}function setButtonSelectSourceSAM(){var e=document.createElement("div"),t=(e.classList.add("relative","group"),document.createElement("div")),a=(t.classList.add("hidden","absolute","p-2","group-hover:flex","items-center","gap-3","bottom-full","left-1/2","-translate-x-1/2","-translate-y-3.5","bg-dark-elements-hover","rounded-md","w-[300px]"),document.createElement("img")),l=(a.classList.add("w-20","h-20","rounded-md"),a.src="/static/modules/thumbnail/select_object.png",a.alt="Segment object",a.width=256,a.height=256,document.createElement("span")),o=(l.classList.add("text-m-mobile","lg:text-m"),l.style="display: inline-block; vertical-align: top; text-decoration: inherit; text-wrap: balance;",l.textContent=getTranslationBabel("Let the neural network handle it, then click to include with the right, exclude with the left. Don’t forget to switch brushes."),document.createElement("div")),n=(o.classList.add("relative","flex","gap-2","items-center","rounded-md","bg-light-emphasis"),o.style.stroke="white",document.createElement("button")),s=(n.classList.add("text-danger-primary","stroke-danger-primary","relative","flex","gap-2","items-center","group","py-1.5","pl-2","whitespace-nowrap","font-extra-thick","pr-2"),n.type="button",n.innerHTML='<i class="fa-solid fa-object-group transition-[stroke,opacity] opacity-60 group-hover:opacity-100"></i>',document.createElement("span"));return s.textContent=getTranslationBabel("Select object"),n.onclick=function(){var e=document.querySelector(".footer-preview");e&&("img"===e.tagName.toLowerCase()&&e.src?createModalSAMImage(sendModuleData.sourceFile.urlFile,this,null):"video"===e.tagName.toLowerCase()&&e.src&&createModalSAMVideo(sendModuleData.sourceFile.urlFile,this,null))},n.appendChild(s),t.appendChild(a),t.appendChild(l),o.appendChild(n),e.appendChild(t),e.appendChild(o),e}function setLiteSetting(){const e=getTranslationBabel("remove background");var t=document.querySelector("#settings");t.href="",t.onclick=async function(){event.preventDefault(),createModalLiteSetting(e,"REMOVE_BACKGROUND")}}setLiteSetting(),createFooterFile(callbacks,pageFileFormats);